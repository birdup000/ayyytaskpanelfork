"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/agixt";
exports.ids = ["vendor-chunks/agixt"];
exports.modules = {

/***/ "(ssr)/./node_modules/agixt/dist/index.js":
/*!******************************************!*\
  !*** ./node_modules/agixt/dist/index.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar axios_1 = __importDefault(__webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/dist/node/axios.cjs\"));\nvar AGiXTSDK = /** @class */ (function () {\n    function AGiXTSDK(config) {\n        this.baseUri = config.baseUri || 'http://localhost:7437';\n        if (config.apiKey) {\n            if (config.apiKey.includes('Bearer ')) {\n                config.apiKey = config.apiKey.replace('Bearer ', '');\n            }\n            this.headers = {\n                Authorization: \"Bearer \".concat(config.apiKey),\n                'Content-Type': 'application/json',\n            };\n        }\n        else {\n            this.headers = {\n                'Content-Type': 'application/json',\n            };\n        }\n        if (this.baseUri.slice(-1) === '/') {\n            this.baseUri = this.baseUri.slice(0, -1);\n        }\n    }\n    AGiXTSDK.prototype.handleError = function (error) {\n        //console.error(`Error: ${error}`);\n        return \"Error: \".concat(error);\n    };\n    AGiXTSDK.prototype.getProviders = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/provider\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.providers];\n                    case 2:\n                        error_1 = _a.sent();\n                        return [2 /*return*/, [this.handleError(error_1)]];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getProvidersByService = function (service) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/providers/service/\").concat(service), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.providers];\n                    case 2:\n                        error_2 = _a.sent();\n                        return [2 /*return*/, [this.handleError(error_2)]];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getAllProviders = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/providers\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.providers];\n                    case 2:\n                        error_3 = _a.sent();\n                        return [2 /*return*/, [this.handleError(error_3)]];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getProviderSettings = function (providerName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/provider/\").concat(providerName), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.settings];\n                    case 2:\n                        error_4 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_4)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getEmbedProviders = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_5;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/embedding_providers\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.providers];\n                    case 2:\n                        error_5 = _a.sent();\n                        return [2 /*return*/, [this.handleError(error_5)]];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.addAgent = function (agentName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, settings) {\n            var response, error_6;\n            if (settings === void 0) { settings = {}; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent\"), {\n                                agent_name: agentName,\n                                settings: settings,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                    case 2:\n                        error_6 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_6)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.importAgent = function (agentName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, settings, commands) {\n            var response, error_7;\n            if (settings === void 0) { settings = {}; }\n            if (commands === void 0) { commands = {}; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/import\"), {\n                                agent_name: agentName,\n                                settings: settings,\n                                commands: commands,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                    case 2:\n                        error_7 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_7)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.renameAgent = function (agentName, newName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_8;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.patch(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName), { new_name: newName }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                    case 2:\n                        error_8 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_8)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.updateAgentSettings = function (agentName, settings) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_9;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName), {\n                                settings: settings,\n                                agent_name: agentName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_9 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_9)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.updateAgentCommands = function (agentName, commands) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_10;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/commands\"), {\n                                commands: commands,\n                                agent_name: agentName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_10 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_10)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteAgent = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_11;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_11 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_11)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getAgents = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_12;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.agents];\n                    case 2:\n                        error_12 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_12)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getAgentConfig = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_13;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.agent];\n                    case 2:\n                        error_13 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_13)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getConversations = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, response, error_14;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        url = agentName ? \"\".concat(this.baseUri, \"/api/\").concat(agentName, \"/conversations\") : \"\".concat(this.baseUri, \"/api/conversations\");\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, axios_1.default.get(url, {\n                                headers: this.headers,\n                            })];\n                    case 2:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.conversations];\n                    case 3:\n                        error_14 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_14)];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.addConversationFeedback = function (positive, agentName, message, userInput, feedback, conversationName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_15;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/feedback\"), {\n                                positive: positive,\n                                feedback: feedback,\n                                message: message,\n                                user_input: userInput,\n                                conversation_name: conversationName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_15 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_15)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getConversation = function () {\n        return __awaiter(this, arguments, void 0, function (conversationName, limit, page, agentName) {\n            var response, error_16;\n            if (conversationName === void 0) { conversationName = ''; }\n            if (limit === void 0) { limit = 100; }\n            if (page === void 0) { page = 1; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.request({\n                                method: 'get',\n                                url: \"\".concat(this.baseUri, \"/api/conversation/\").concat(conversationName),\n                                headers: this.headers,\n                                params: {\n                                    agent_name: agentName,\n                                    limit: limit,\n                                    page: page,\n                                },\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.conversation_history];\n                    case 2:\n                        error_16 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_16)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.renameConversation = function (agentName_1, conversationName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, conversationName, newName) {\n            var response, error_17;\n            if (newName === void 0) { newName = '-'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/conversation\"), {\n                                conversation_name: conversationName,\n                                new_conversation_name: newName,\n                                agent_name: agentName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.conversation_name];\n                    case 2:\n                        error_17 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_17)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.forkConversation = function (conversationName, messageId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_18;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/conversation/fork\"), {\n                                conversation_name: conversationName,\n                                message_id: messageId,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_18 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_18)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.newConversation = function (agentName_1, conversationName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, conversationName, conversationContent) {\n            var response, error_19;\n            if (conversationContent === void 0) { conversationContent = []; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/conversation\"), {\n                                conversation_name: conversationName,\n                                agent_name: agentName,\n                                conversation_content: conversationContent,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.conversation_history];\n                    case 2:\n                        error_19 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_19)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteConversation = function (conversationName, agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_20;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/conversation\"), {\n                                headers: this.headers,\n                                data: {\n                                    conversation_name: conversationName,\n                                    agent_name: agentName,\n                                },\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_20 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_20)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.updateConversationMessage = function (conversationName, messageId, newMessage) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_21;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/conversation/message/\").concat(messageId), {\n                                conversation_name: conversationName,\n                                new_message: newMessage,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_21 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_21)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteConversationMessage = function (conversationName, messageId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_22;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/conversation/message/\").concat(messageId), {\n                                headers: this.headers,\n                                data: {\n                                    conversation_name: conversationName,\n                                },\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_22 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_22)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.importAgentMemories = function (agentName, memories) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_23;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/import\"), {\n                                memories: memories,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_23 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_23)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.exportAgentMemories = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_24;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/export\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.memories];\n                    case 2:\n                        error_24 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_24)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.wipeAgentMemories = function (agentName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, collectionNumber) {\n            var response, error_25;\n            if (collectionNumber === void 0) { collectionNumber = \"0\"; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/\").concat(collectionNumber), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_25 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_25)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.promptAgent = function (agentName, promptName, promptArgs) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_26;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/prompt\"), {\n                                prompt_name: promptName,\n                                prompt_args: promptArgs,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.response];\n                    case 2:\n                        error_26 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_26)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.instruct = function (agentName, userInput, conversation) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.promptAgent(agentName, 'instruct', {\n                        user_input: userInput,\n                        disable_memory: true,\n                        conversation_name: conversation,\n                    })];\n            });\n        });\n    };\n    AGiXTSDK.prototype.chat = function (agentName_1, userInput_1, conversation_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, userInput, conversation, contextResults) {\n            if (contextResults === void 0) { contextResults = 4; }\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.promptAgent(agentName, 'Chat', {\n                        user_input: userInput,\n                        context_results: contextResults,\n                        conversation_name: conversation,\n                        disable_memory: true,\n                    })];\n            });\n        });\n    };\n    AGiXTSDK.prototype.smartinstruct = function (agentName, userInput, conversation) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.runChain('Smart Instruct', userInput, agentName, false, 1, {\n                        conversation_name: conversation,\n                        disable_memory: true,\n                    })];\n            });\n        });\n    };\n    AGiXTSDK.prototype.smartchat = function (agentName, userInput, conversation) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.runChain('Smart Chat', userInput, agentName, false, 1, {\n                        conversation_name: conversation,\n                        disable_memory: true,\n                    })];\n            });\n        });\n    };\n    AGiXTSDK.prototype.getCommands = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_27;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/command\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.commands];\n                    case 2:\n                        error_27 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_27)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.executeCommand = function (agentName, commandName, commandArgs, conversation) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_28;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/command\"), {\n                                command_name: commandName,\n                                command_args: commandArgs,\n                                conversation_name: conversation,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.response];\n                    case 2:\n                        error_28 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_28)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.toggleCommand = function (agentName, commandName, enable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_29;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.patch(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/command\"), { command_name: commandName, enable: enable }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_29 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_29)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getChains = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_30;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/chain\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                    case 2:\n                        error_30 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_30)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getChain = function (chainName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_31;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.chain];\n                    case 2:\n                        error_31 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_31)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getChainResponses = function (chainName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_32;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/responses\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.chain];\n                    case 2:\n                        error_32 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_32)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getChainArgs = function (chainName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_33;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/args\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.chain_args];\n                    case 2:\n                        error_33 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_33)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.runChain = function (chainName_1, userInput_1) {\n        return __awaiter(this, arguments, void 0, function (chainName, userInput, agentName, allResponses, fromStep, chainArgs) {\n            var response, error_34;\n            if (agentName === void 0) { agentName = ''; }\n            if (allResponses === void 0) { allResponses = false; }\n            if (fromStep === void 0) { fromStep = 1; }\n            if (chainArgs === void 0) { chainArgs = {}; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/run\"), {\n                                prompt: userInput,\n                                agent_override: agentName,\n                                all_responses: allResponses,\n                                from_step: fromStep,\n                                chain_args: chainArgs,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                    case 2:\n                        error_34 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_34)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.runChainStep = function (chainName_1, stepNumber_1, userInput_1, agentName_1) {\n        return __awaiter(this, arguments, void 0, function (chainName, stepNumber, userInput, agentName, chainArgs) {\n            var response, error_35;\n            if (chainArgs === void 0) { chainArgs = {}; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/run/step/\").concat(stepNumber), {\n                                prompt: userInput,\n                                agent_override: agentName,\n                                chain_args: chainArgs,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                    case 2:\n                        error_35 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_35)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.addChain = function (chainName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_36;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/chain\"), { chain_name: chainName }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_36 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_36)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.importChain = function (chainName, steps) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_37;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/chain/import\"), {\n                                chain_name: chainName,\n                                steps: steps,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_37 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_37)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.renameChain = function (chainName, newName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_38;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName), { new_name: newName }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_38 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_38)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteChain = function (chainName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_39;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_39 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_39)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.addStep = function (chainName, stepNumber, agentName, promptType, prompt) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_40;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/step\"), {\n                                step_number: stepNumber,\n                                agent_name: agentName,\n                                prompt_type: promptType,\n                                prompt: prompt,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_40 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_40)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.updateStep = function (chainName, stepNumber, agentName, promptType, prompt) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_41;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/step/\").concat(stepNumber), {\n                                step_number: stepNumber,\n                                agent_name: agentName,\n                                prompt_type: promptType,\n                                prompt: prompt,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_41 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_41)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.moveStep = function (chainName, oldStepNumber, newStepNumber) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_42;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.patch(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/step/move\"), {\n                                old_step_number: oldStepNumber,\n                                new_step_number: newStepNumber,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_42 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_42)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteStep = function (chainName, stepNumber) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_43;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/chain/\").concat(chainName, \"/step/\").concat(stepNumber), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_43 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_43)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.addPrompt = function (promptName_1, prompt_1) {\n        return __awaiter(this, arguments, void 0, function (promptName, prompt, promptCategory) {\n            var response, error_44;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory), {\n                                prompt_name: promptName,\n                                prompt: prompt,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_44 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_44)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getPrompt = function (promptName_1) {\n        return __awaiter(this, arguments, void 0, function (promptName, promptCategory) {\n            var response, error_45;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory, \"/\").concat(promptName), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.prompt];\n                    case 2:\n                        error_45 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_45)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getPrompts = function () {\n        return __awaiter(this, arguments, void 0, function (promptCategory) {\n            var response, error_46;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.prompts];\n                    case 2:\n                        error_46 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_46)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.addPromptCategory = function (promptCategory) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_47;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, \"Prompt category \".concat(promptCategory, \" created.\")];\n                    case 2:\n                        error_47 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_47)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getPromptCategories = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_48;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/prompt/categories\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.prompt_categories];\n                    case 2:\n                        error_48 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_48)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getPromptArgs = function (promptName_1) {\n        return __awaiter(this, arguments, void 0, function (promptName, promptCategory) {\n            var response, error_49;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory, \"/\").concat(promptName, \"/args\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.prompt_args];\n                    case 2:\n                        error_49 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_49)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deletePrompt = function (promptName_1) {\n        return __awaiter(this, arguments, void 0, function (promptName, promptCategory) {\n            var response, error_50;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory, \"/\").concat(promptName), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_50 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_50)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.updatePrompt = function (promptName_1, prompt_1) {\n        return __awaiter(this, arguments, void 0, function (promptName, prompt, promptCategory) {\n            var response, error_51;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory, \"/\").concat(promptName), {\n                                prompt: prompt,\n                                prompt_name: promptName,\n                                prompt_category: promptCategory,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_51 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_51)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.renamePrompt = function (promptName_1, newName_1) {\n        return __awaiter(this, arguments, void 0, function (promptName, newName, promptCategory) {\n            var response, error_52;\n            if (promptCategory === void 0) { promptCategory = 'Default'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.patch(\"\".concat(this.baseUri, \"/api/prompt/\").concat(promptCategory, \"/\").concat(promptName), { prompt_name: newName }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_52 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_52)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getExtensionSettings = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_53;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/extensions/settings\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.extension_settings];\n                    case 2:\n                        error_53 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_53)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getExtensions = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_54;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/extensions\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.extensions];\n                    case 2:\n                        error_54 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_54)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getAgentExtensions = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_55;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/extensions\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.extensions];\n                    case 2:\n                        error_55 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_55)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getCommandArgs = function (commandName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_56;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/extensions/\").concat(commandName, \"/args\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.command_args];\n                    case 2:\n                        error_56 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_56)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.learnText = function (agentName_1, userInput_1, text_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, userInput, text, collectionNumber) {\n            var response, error_57;\n            if (collectionNumber === void 0) { collectionNumber = \"0\"; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/learn/text\"), {\n                                user_input: userInput,\n                                text: text,\n                                collection_number: collectionNumber,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_57 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_57)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.learnUrl = function (agentName_1, url_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, url, collectionNumber) {\n            var response, error_58;\n            if (collectionNumber === void 0) { collectionNumber = \"0\"; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/learn/url\"), { url: url, collection_number: collectionNumber }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_58 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_58)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.learnFile = function (agentName_1, fileName_1, fileContent_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, fileName, fileContent, collectionNumber) {\n            var response, error_59;\n            if (collectionNumber === void 0) { collectionNumber = \"0\"; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/learn/file\"), {\n                                file_name: fileName,\n                                file_content: fileContent,\n                                collection_number: collectionNumber,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_59 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_59)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.learnGithubRepo = function (agentName_1, githubRepo_1, githubUser_1, githubToken_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, githubRepo, githubUser, githubToken, githubBranch, useAgentSettings, collectionNumber) {\n            var response, error_60;\n            if (githubBranch === void 0) { githubBranch = 'main'; }\n            if (useAgentSettings === void 0) { useAgentSettings = false; }\n            if (collectionNumber === void 0) { collectionNumber = '0'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/learn/github\"), {\n                                github_repo: githubRepo,\n                                github_user: githubUser,\n                                github_token: githubToken,\n                                github_branch: githubBranch,\n                                use_agent_settings: useAgentSettings,\n                                collection_number: collectionNumber,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_60 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_60)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.learnArxiv = function (agentName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, query, arxivIds, maxResults, collectionNumber) {\n            var response, error_61;\n            if (query === void 0) { query = ''; }\n            if (arxivIds === void 0) { arxivIds = ''; }\n            if (maxResults === void 0) { maxResults = 5; }\n            if (collectionNumber === void 0) { collectionNumber = '0'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/learn/arxiv\"), {\n                                query: query,\n                                arxiv_ids: arxivIds,\n                                max_results: maxResults,\n                                collection_number: collectionNumber,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_61 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_61)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.agentReader = function (agentName_1, readerName_1, data_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, readerName, data, collectionNumber) {\n            var response, error_62;\n            if (collectionNumber === void 0) { collectionNumber = '0'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!data.collection_number) {\n                            data.collection_number = collectionNumber;\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/reader/\").concat(readerName), { data: data }, { headers: this.headers })];\n                    case 2:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 3:\n                        error_62 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_62)];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getAgentMemories = function (agentName_1, userInput_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, userInput, limit, minRelevanceScore, collectionNumber) {\n            var response, error_63;\n            if (limit === void 0) { limit = 5; }\n            if (minRelevanceScore === void 0) { minRelevanceScore = 0.5; }\n            if (collectionNumber === void 0) { collectionNumber = \"0\"; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/\").concat(collectionNumber, \"/query\"), {\n                                user_input: userInput,\n                                limit: limit,\n                                min_relevance_score: minRelevanceScore,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.memories];\n                    case 2:\n                        error_63 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_63)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteAgentMemory = function (agentName_1, memoryId_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, memoryId, collectionNumber) {\n            var response, error_64;\n            if (collectionNumber === void 0) { collectionNumber = \"0\"; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/\").concat(collectionNumber, \"/\").concat(memoryId), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_64 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_64)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.createDataset = function (agentName_1, datasetName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, datasetName, batchSize) {\n            var response, error_65;\n            if (batchSize === void 0) { batchSize = 4; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/dataset\"), {\n                                dataset_name: datasetName,\n                                batch_size: batchSize,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_65 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_65)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.executeCommandWithVoice = function (agentName_1, base64Audio_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, base64Audio, audioFormat, audioVariable, commandName, commandArgs, tts, conversationName) {\n            var response, error_66;\n            if (audioFormat === void 0) { audioFormat = 'm4a'; }\n            if (audioVariable === void 0) { audioVariable = 'data_to_correlate_with_input'; }\n            if (commandName === void 0) { commandName = 'Store information in my long term memory'; }\n            if (commandArgs === void 0) { commandArgs = { input: 'Voice transcription from user' }; }\n            if (tts === void 0) { tts = false; }\n            if (conversationName === void 0) { conversationName = 'AGiXT Terminal'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/command\"), {\n                                command_name: 'Command with Voice',\n                                command_args: {\n                                    base64_audio: base64Audio,\n                                    audio_variable: audioVariable,\n                                    audio_format: audioFormat,\n                                    tts: tts,\n                                    command_name: commandName,\n                                    command_args: commandArgs,\n                                },\n                                conversation_name: conversationName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.response];\n                    case 2:\n                        error_66 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_66)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getEmbeddersDetails = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_67;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/embedders\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.embedders];\n                    case 2:\n                        error_67 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_67)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.positiveFeedback = function (agentName_1, message_1, userInput_1, feedback_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, message, userInput, feedback, conversationName) {\n            if (conversationName === void 0) { conversationName = ''; }\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.provideFeedback(agentName, message, userInput, feedback, true, conversationName)];\n            });\n        });\n    };\n    AGiXTSDK.prototype.negativeFeedback = function (agentName_1, message_1, userInput_1, feedback_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, message, userInput, feedback, conversationName) {\n            if (conversationName === void 0) { conversationName = ''; }\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.provideFeedback(agentName, message, userInput, feedback, false, conversationName)];\n            });\n        });\n    };\n    AGiXTSDK.prototype.provideFeedback = function (agentName, message, userInput, feedback, positive, conversationName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_68;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/feedback\"), {\n                                user_input: userInput,\n                                message: message,\n                                feedback: feedback,\n                                positive: positive,\n                                conversation_name: conversationName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_68 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_68)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getBrowsedLinks = function (agentName_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, collectionNumber) {\n            var response, error_69;\n            if (collectionNumber === void 0) { collectionNumber = '0'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/browsed_links/\").concat(collectionNumber), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.links];\n                    case 2:\n                        error_69 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_69)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteBrowsedLink = function (agentName_1, link_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, link, collectionNumber) {\n            var response, error_70;\n            if (collectionNumber === void 0) { collectionNumber = '0'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/browsed_links\"), {\n                                headers: this.headers,\n                                data: { link: link, collection_number: collectionNumber },\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_70 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_70)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getMemoriesExternalSources = function (agentName, collectionNumber) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_71;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/external_sources/\").concat(collectionNumber), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.external_sources];\n                    case 2:\n                        error_71 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_71)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.deleteMemoryExternalSource = function (agentName, source, collectionNumber) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_72;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.delete(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/memory/external_source\"), {\n                                headers: this.headers,\n                                data: {\n                                    external_source: source,\n                                    collection_number: collectionNumber,\n                                },\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_72 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_72)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getPersona = function (agentName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_73;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/persona\"), { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.persona];\n                    case 2:\n                        error_73 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_73)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.updatePersona = function (agentName, persona) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_74;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.put(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/persona\"), { persona: persona }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_74 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_74)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.promptAgentWithVoice = function (agentName_1, base64Audio_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, base64Audio, audioFormat, audioVariable, promptName, promptArgs, tts, conversationName) {\n            var response, error_75;\n            if (audioFormat === void 0) { audioFormat = 'm4a'; }\n            if (audioVariable === void 0) { audioVariable = 'user_input'; }\n            if (promptName === void 0) { promptName = 'Custom Input'; }\n            if (promptArgs === void 0) { promptArgs = {\n                context_results: 6,\n                inject_memories_from_collection_number: 0,\n            }; }\n            if (tts === void 0) { tts = false; }\n            if (conversationName === void 0) { conversationName = 'AGiXT Terminal'; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/command\"), {\n                                command_name: 'Prompt with Voice',\n                                command_args: {\n                                    base64_audio: base64Audio,\n                                    audio_variable: audioVariable,\n                                    audio_format: audioFormat,\n                                    tts: tts,\n                                    prompt_name: promptName,\n                                    prompt_args: promptArgs,\n                                },\n                                conversation_name: conversationName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.response];\n                    case 2:\n                        error_75 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_75)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.textToSpeech = function (agentName, text) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_76;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/text_to_speech\"), { text: text }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.url];\n                    case 2:\n                        error_76 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_76)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.newConversationMessage = function (role, message, conversationName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_77;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/conversation/message\"), {\n                                role: role,\n                                message: message,\n                                conversation_name: conversationName,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.message];\n                    case 2:\n                        error_77 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_77)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.getConversationsWithIds = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, error_78;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.get(\"\".concat(this.baseUri, \"/api/conversations\"), {\n                                headers: this.headers,\n                            })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.conversations_with_ids];\n                    case 2:\n                        error_78 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_78)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AGiXTSDK.prototype.planTask = function (agentName_1, userInput_1) {\n        return __awaiter(this, arguments, void 0, function (agentName, userInput, websearch, websearchDepth, conversationName, logUserInput, logOutput, enableNewCommand) {\n            var response, error_79;\n            if (websearch === void 0) { websearch = false; }\n            if (websearchDepth === void 0) { websearchDepth = 3; }\n            if (conversationName === void 0) { conversationName = ''; }\n            if (logUserInput === void 0) { logUserInput = true; }\n            if (logOutput === void 0) { logOutput = true; }\n            if (enableNewCommand === void 0) { enableNewCommand = true; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, axios_1.default.post(\"\".concat(this.baseUri, \"/api/agent/\").concat(agentName, \"/plan/task\"), {\n                                user_input: userInput,\n                                websearch: websearch,\n                                websearch_depth: websearchDepth,\n                                conversation_name: conversationName,\n                                log_user_input: logUserInput,\n                                log_output: logOutput,\n                                enable_new_command: enableNewCommand,\n                            }, { headers: this.headers })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data.response];\n                    case 2:\n                        error_79 = _a.sent();\n                        return [2 /*return*/, this.handleError(error_79)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return AGiXTSDK;\n}());\nexports[\"default\"] = AGiXTSDK;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWdpeHQvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWMsNkJBQTZCLDBCQUEwQixjQUFjLHFCQUFxQjtBQUN4RyxpQkFBaUIsb0RBQW9ELHFFQUFxRSxjQUFjO0FBQ3hKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw4QkFBOEIsbUJBQU8sQ0FBQyw2REFBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxNQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZHQUE2Ryx1QkFBdUI7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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NkhBQTZILG1CQUFtQixJQUFJLHVCQUF1QjtBQUMzSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0lBQWdJLHVCQUF1QjtBQUN2SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixJQUFJLHVCQUF1QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixJQUFJLHVCQUF1QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLElBQUksdUJBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLElBQUksdUJBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvS0FBb0ssdUJBQXVCO0FBQzNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLElBQUks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QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsSUFBSSx1QkFBdUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZTtBQUNmIiwic291cmNlcyI6WyIvaG9tZS9wcm9qZWN0L25vZGVfbW9kdWxlcy9hZ2l4dC9kaXN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGF4aW9zXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImF4aW9zXCIpKTtcbnZhciBBR2lYVFNESyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBR2lYVFNESyhjb25maWcpIHtcbiAgICAgICAgdGhpcy5iYXNlVXJpID0gY29uZmlnLmJhc2VVcmkgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NzQzNyc7XG4gICAgICAgIGlmIChjb25maWcuYXBpS2V5KSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmFwaUtleS5pbmNsdWRlcygnQmVhcmVyICcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmFwaUtleSA9IGNvbmZpZy5hcGlLZXkucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQoY29uZmlnLmFwaUtleSksXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYmFzZVVyaS5zbGljZSgtMSkgPT09ICcvJykge1xuICAgICAgICAgICAgdGhpcy5iYXNlVXJpID0gdGhpcy5iYXNlVXJpLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBR2lYVFNESy5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgLy9jb25zb2xlLmVycm9yKGBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgcmV0dXJuIFwiRXJyb3I6IFwiLmNvbmNhdChlcnJvcik7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9wcm92aWRlclwiKSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnByb3ZpZGVyc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW3RoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMSldXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldFByb3ZpZGVyc0J5U2VydmljZSA9IGZ1bmN0aW9uIChzZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL3Byb3ZpZGVycy9zZXJ2aWNlL1wiKS5jb25jYXQoc2VydmljZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5wcm92aWRlcnNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFt0aGlzLmhhbmRsZUVycm9yKGVycm9yXzIpXV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5nZXRBbGxQcm92aWRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL3Byb3ZpZGVyc1wiKSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnByb3ZpZGVyc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW3RoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMyldXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldFByb3ZpZGVyU2V0dGluZ3MgPSBmdW5jdGlvbiAocHJvdmlkZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL3Byb3ZpZGVyL1wiKS5jb25jYXQocHJvdmlkZXJOYW1lKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnNldHRpbmdzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEVtYmVkUHJvdmlkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzU7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9lbWJlZGRpbmdfcHJvdmlkZXJzXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEucHJvdmlkZXJzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbdGhpcy5oYW5kbGVFcnJvcihlcnJvcl81KV1dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuYWRkQWdlbnQgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNjtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncyA9PT0gdm9pZCAwKSB7IHNldHRpbmdzID0ge307IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudFwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl82ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuaW1wb3J0QWdlbnQgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgc2V0dGluZ3MsIGNvbW1hbmRzKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzc7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MgPT09IHZvaWQgMCkgeyBzZXR0aW5ncyA9IHt9OyB9XG4gICAgICAgICAgICBpZiAoY29tbWFuZHMgPT09IHZvaWQgMCkgeyBjb21tYW5kcyA9IHt9OyB9XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBvc3QoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvaW1wb3J0XCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kczogY29tbWFuZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzcpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnJlbmFtZUFnZW50ID0gZnVuY3Rpb24gKGFnZW50TmFtZSwgbmV3TmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBhdGNoKFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lKSwgeyBuZXdfbmFtZTogbmV3TmFtZSB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl84ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfOCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUudXBkYXRlQWdlbnRTZXR0aW5ncyA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIHNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfOTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucHV0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzkgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl85KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS51cGRhdGVBZ2VudENvbW1hbmRzID0gZnVuY3Rpb24gKGFnZW50TmFtZSwgY29tbWFuZHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8xMDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucHV0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9jb21tYW5kc1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kczogY29tbWFuZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEwID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMTApXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZUFnZW50ID0gZnVuY3Rpb24gKGFnZW50TmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzExO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5kZWxldGUoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzExID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMTEpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEFnZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8xMjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50XCIpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuYWdlbnRzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMTIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8xMildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0QWdlbnRDb25maWcgPSBmdW5jdGlvbiAoYWdlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMTM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5hZ2VudF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMTMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbnMgPSBmdW5jdGlvbiAoYWdlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmwsIHJlc3BvbnNlLCBlcnJvcl8xNDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGFnZW50TmFtZSA/IFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9jb252ZXJzYXRpb25zXCIpIDogXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY29udmVyc2F0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuY29udmVyc2F0aW9uc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzE0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMTQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmFkZENvbnZlcnNhdGlvbkZlZWRiYWNrID0gZnVuY3Rpb24gKHBvc2l0aXZlLCBhZ2VudE5hbWUsIG1lc3NhZ2UsIHVzZXJJbnB1dCwgZmVlZGJhY2ssIGNvbnZlcnNhdGlvbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8xNTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvZmVlZGJhY2tcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpdmU6IHBvc2l0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWVkYmFjazogZmVlZGJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaW5wdXQ6IHVzZXJJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xNSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzE1KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChjb252ZXJzYXRpb25OYW1lLCBsaW1pdCwgcGFnZSwgYWdlbnROYW1lKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzE2O1xuICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbk5hbWUgPT09IHZvaWQgMCkgeyBjb252ZXJzYXRpb25OYW1lID0gJyc7IH1cbiAgICAgICAgICAgIGlmIChsaW1pdCA9PT0gdm9pZCAwKSB7IGxpbWl0ID0gMTAwOyB9XG4gICAgICAgICAgICBpZiAocGFnZSA9PT0gdm9pZCAwKSB7IHBhZ2UgPSAxOyB9XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2NvbnZlcnNhdGlvbi9cIikuY29uY2F0KGNvbnZlcnNhdGlvbk5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuY29udmVyc2F0aW9uX2hpc3RvcnldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xNiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzE2KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5yZW5hbWVDb252ZXJzYXRpb24gPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIGNvbnZlcnNhdGlvbk5hbWVfMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAoYWdlbnROYW1lLCBjb252ZXJzYXRpb25OYW1lLCBuZXdOYW1lKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzE3O1xuICAgICAgICAgICAgaWYgKG5ld05hbWUgPT09IHZvaWQgMCkgeyBuZXdOYW1lID0gJy0nOyB9XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnB1dChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jb252ZXJzYXRpb25cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19jb252ZXJzYXRpb25fbmFtZTogbmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5jb252ZXJzYXRpb25fbmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzE3ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMTcpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmZvcmtDb252ZXJzYXRpb24gPSBmdW5jdGlvbiAoY29udmVyc2F0aW9uTmFtZSwgbWVzc2FnZUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMTg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBvc3QoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY29udmVyc2F0aW9uL2ZvcmtcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzE4ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMTgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLm5ld0NvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSwgY29udmVyc2F0aW9uTmFtZV8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIGNvbnZlcnNhdGlvbk5hbWUsIGNvbnZlcnNhdGlvbkNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMTk7XG4gICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uQ29udGVudCA9PT0gdm9pZCAwKSB7IGNvbnZlcnNhdGlvbkNvbnRlbnQgPSBbXTsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2NvbnZlcnNhdGlvblwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25fbmFtZTogY29udmVyc2F0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25fY29udGVudDogY29udmVyc2F0aW9uQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuY29udmVyc2F0aW9uX2hpc3RvcnldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xOSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzE5KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5kZWxldGVDb252ZXJzYXRpb24gPSBmdW5jdGlvbiAoY29udmVyc2F0aW9uTmFtZSwgYWdlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMjA7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmRlbGV0ZShcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jb252ZXJzYXRpb25cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25fbmFtZTogY29udmVyc2F0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzIwID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMjApXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnVwZGF0ZUNvbnZlcnNhdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoY29udmVyc2F0aW9uTmFtZSwgbWVzc2FnZUlkLCBuZXdNZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMjE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnB1dChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jb252ZXJzYXRpb24vbWVzc2FnZS9cIikuY29uY2F0KG1lc3NhZ2VJZCksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19tZXNzYWdlOiBuZXdNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMjEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8yMSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZGVsZXRlQ29udmVyc2F0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChjb252ZXJzYXRpb25OYW1lLCBtZXNzYWdlSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8yMjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZGVsZXRlKFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2NvbnZlcnNhdGlvbi9tZXNzYWdlL1wiKS5jb25jYXQobWVzc2FnZUlkKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9uYW1lOiBjb252ZXJzYXRpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMjIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8yMildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuaW1wb3J0QWdlbnRNZW1vcmllcyA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIG1lbW9yaWVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMjM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBvc3QoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL21lbW9yeS9pbXBvcnRcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3JpZXM6IG1lbW9yaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMjMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8yMyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZXhwb3J0QWdlbnRNZW1vcmllcyA9IGZ1bmN0aW9uIChhZ2VudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8yNDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9tZW1vcnkvZXhwb3J0XCIpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVtb3JpZXNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yNCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzI0KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS53aXBlQWdlbnRNZW1vcmllcyA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAoYWdlbnROYW1lLCBjb2xsZWN0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzI1O1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25OdW1iZXIgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uTnVtYmVyID0gXCIwXCI7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZGVsZXRlKFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9tZW1vcnkvXCIpLmNvbmNhdChjb2xsZWN0aW9uTnVtYmVyKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yNSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzI1KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5wcm9tcHRBZ2VudCA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIHByb21wdE5hbWUsIHByb21wdEFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8yNjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvcHJvbXB0XCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdF9uYW1lOiBwcm9tcHROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRfYXJnczogcHJvbXB0QXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEucmVzcG9uc2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yNiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzI2KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5pbnN0cnVjdCA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIHVzZXJJbnB1dCwgY29udmVyc2F0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wcm9tcHRBZ2VudChhZ2VudE5hbWUsICdpbnN0cnVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaW5wdXQ6IHVzZXJJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVfbWVtb3J5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmNoYXQgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIHVzZXJJbnB1dF8xLCBjb252ZXJzYXRpb25fMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAoYWdlbnROYW1lLCB1c2VySW5wdXQsIGNvbnZlcnNhdGlvbiwgY29udGV4dFJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0UmVzdWx0cyA9PT0gdm9pZCAwKSB7IGNvbnRleHRSZXN1bHRzID0gNDsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnByb21wdEFnZW50KGFnZW50TmFtZSwgJ0NoYXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lucHV0OiB1c2VySW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0X3Jlc3VsdHM6IGNvbnRleHRSZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVfbWVtb3J5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuc21hcnRpbnN0cnVjdCA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIHVzZXJJbnB1dCwgY29udmVyc2F0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydW5DaGFpbignU21hcnQgSW5zdHJ1Y3QnLCB1c2VySW5wdXQsIGFnZW50TmFtZSwgZmFsc2UsIDEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9uYW1lOiBjb252ZXJzYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlX21lbW9yeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnNtYXJ0Y2hhdCA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIHVzZXJJbnB1dCwgY29udmVyc2F0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydW5DaGFpbignU21hcnQgQ2hhdCcsIHVzZXJJbnB1dCwgYWdlbnROYW1lLCBmYWxzZSwgMSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVfbWVtb3J5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0Q29tbWFuZHMgPSBmdW5jdGlvbiAoYWdlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMjc7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvY29tbWFuZFwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLmNvbW1hbmRzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMjcgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8yNyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZXhlY3V0ZUNvbW1hbmQgPSBmdW5jdGlvbiAoYWdlbnROYW1lLCBjb21tYW5kTmFtZSwgY29tbWFuZEFyZ3MsIGNvbnZlcnNhdGlvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzI4O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9jb21tYW5kXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfbmFtZTogY29tbWFuZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfYXJnczogY29tbWFuZEFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9uYW1lOiBjb252ZXJzYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMjggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8yOCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUudG9nZ2xlQ29tbWFuZCA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIGNvbW1hbmROYW1lLCBlbmFibGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8yOTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucGF0Y2goXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL2NvbW1hbmRcIiksIHsgY29tbWFuZF9uYW1lOiBjb21tYW5kTmFtZSwgZW5hYmxlOiBlbmFibGUgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yOSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzI5KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5nZXRDaGFpbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMzA7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jaGFpblwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMzAgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8zMCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0Q2hhaW4gPSBmdW5jdGlvbiAoY2hhaW5OYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jaGFpbi9cIikuY29uY2F0KGNoYWluTmFtZSksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5jaGFpbl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzMxID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMzEpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldENoYWluUmVzcG9uc2VzID0gZnVuY3Rpb24gKGNoYWluTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzMyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY2hhaW4vXCIpLmNvbmNhdChjaGFpbk5hbWUsIFwiL3Jlc3BvbnNlc1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLmNoYWluXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMzIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8zMildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0Q2hhaW5BcmdzID0gZnVuY3Rpb24gKGNoYWluTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzMzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY2hhaW4vXCIpLmNvbmNhdChjaGFpbk5hbWUsIFwiL2FyZ3NcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5jaGFpbl9hcmdzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl8zMyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUucnVuQ2hhaW4gPSBmdW5jdGlvbiAoY2hhaW5OYW1lXzEsIHVzZXJJbnB1dF8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChjaGFpbk5hbWUsIHVzZXJJbnB1dCwgYWdlbnROYW1lLCBhbGxSZXNwb25zZXMsIGZyb21TdGVwLCBjaGFpbkFyZ3MpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMzQ7XG4gICAgICAgICAgICBpZiAoYWdlbnROYW1lID09PSB2b2lkIDApIHsgYWdlbnROYW1lID0gJyc7IH1cbiAgICAgICAgICAgIGlmIChhbGxSZXNwb25zZXMgPT09IHZvaWQgMCkgeyBhbGxSZXNwb25zZXMgPSBmYWxzZTsgfVxuICAgICAgICAgICAgaWYgKGZyb21TdGVwID09PSB2b2lkIDApIHsgZnJvbVN0ZXAgPSAxOyB9XG4gICAgICAgICAgICBpZiAoY2hhaW5BcmdzID09PSB2b2lkIDApIHsgY2hhaW5BcmdzID0ge307IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jaGFpbi9cIikuY29uY2F0KGNoYWluTmFtZSwgXCIvcnVuXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogdXNlcklucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9vdmVycmlkZTogYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfcmVzcG9uc2VzOiBhbGxSZXNwb25zZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fc3RlcDogZnJvbVN0ZXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluX2FyZ3M6IGNoYWluQXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8zNCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzM0KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5ydW5DaGFpblN0ZXAgPSBmdW5jdGlvbiAoY2hhaW5OYW1lXzEsIHN0ZXBOdW1iZXJfMSwgdXNlcklucHV0XzEsIGFnZW50TmFtZV8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChjaGFpbk5hbWUsIHN0ZXBOdW1iZXIsIHVzZXJJbnB1dCwgYWdlbnROYW1lLCBjaGFpbkFyZ3MpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMzU7XG4gICAgICAgICAgICBpZiAoY2hhaW5BcmdzID09PSB2b2lkIDApIHsgY2hhaW5BcmdzID0ge307IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jaGFpbi9cIikuY29uY2F0KGNoYWluTmFtZSwgXCIvcnVuL3N0ZXAvXCIpLmNvbmNhdChzdGVwTnVtYmVyKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHVzZXJJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfb3ZlcnJpZGU6IGFnZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5fYXJnczogY2hhaW5BcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzM1ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMzUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmFkZENoYWluID0gZnVuY3Rpb24gKGNoYWluTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzM2O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2NoYWluXCIpLCB7IGNoYWluX25hbWU6IGNoYWluTmFtZSB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzM2ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMzYpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmltcG9ydENoYWluID0gZnVuY3Rpb24gKGNoYWluTmFtZSwgc3RlcHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8zNztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jaGFpbi9pbXBvcnRcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5fbmFtZTogY2hhaW5OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwczogc3RlcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8zNyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzM3KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5yZW5hbWVDaGFpbiA9IGZ1bmN0aW9uIChjaGFpbk5hbWUsIG5ld05hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl8zODtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucHV0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2NoYWluL1wiKS5jb25jYXQoY2hhaW5OYW1lKSwgeyBuZXdfbmFtZTogbmV3TmFtZSB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzM4ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMzgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZUNoYWluID0gZnVuY3Rpb24gKGNoYWluTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzM5O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5kZWxldGUoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY2hhaW4vXCIpLmNvbmNhdChjaGFpbk5hbWUpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzM5ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfMzkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmFkZFN0ZXAgPSBmdW5jdGlvbiAoY2hhaW5OYW1lLCBzdGVwTnVtYmVyLCBhZ2VudE5hbWUsIHByb21wdFR5cGUsIHByb21wdCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzQwO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2NoYWluL1wiKS5jb25jYXQoY2hhaW5OYW1lLCBcIi9zdGVwXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBfbnVtYmVyOiBzdGVwTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdF90eXBlOiBwcm9tcHRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQwID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNDApXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnVwZGF0ZVN0ZXAgPSBmdW5jdGlvbiAoY2hhaW5OYW1lLCBzdGVwTnVtYmVyLCBhZ2VudE5hbWUsIHByb21wdFR5cGUsIHByb21wdCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzQxO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wdXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY2hhaW4vXCIpLmNvbmNhdChjaGFpbk5hbWUsIFwiL3N0ZXAvXCIpLmNvbmNhdChzdGVwTnVtYmVyKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwX251bWJlcjogc3RlcE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRfdHlwZTogcHJvbXB0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl80MSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzQxKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5tb3ZlU3RlcCA9IGZ1bmN0aW9uIChjaGFpbk5hbWUsIG9sZFN0ZXBOdW1iZXIsIG5ld1N0ZXBOdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl80MjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucGF0Y2goXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY2hhaW4vXCIpLmNvbmNhdChjaGFpbk5hbWUsIFwiL3N0ZXAvbW92ZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRfc3RlcF9udW1iZXI6IG9sZFN0ZXBOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19zdGVwX251bWJlcjogbmV3U3RlcE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNDIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZVN0ZXAgPSBmdW5jdGlvbiAoY2hhaW5OYW1lLCBzdGVwTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNDM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmRlbGV0ZShcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jaGFpbi9cIikuY29uY2F0KGNoYWluTmFtZSwgXCIvc3RlcC9cIikuY29uY2F0KHN0ZXBOdW1iZXIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNDMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmFkZFByb21wdCA9IGZ1bmN0aW9uIChwcm9tcHROYW1lXzEsIHByb21wdF8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChwcm9tcHROYW1lLCBwcm9tcHQsIHByb21wdENhdGVnb3J5KSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzQ0O1xuICAgICAgICAgICAgaWYgKHByb21wdENhdGVnb3J5ID09PSB2b2lkIDApIHsgcHJvbXB0Q2F0ZWdvcnkgPSAnRGVmYXVsdCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9wcm9tcHQvXCIpLmNvbmNhdChwcm9tcHRDYXRlZ29yeSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0X25hbWU6IHByb21wdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogcHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNDQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl80NCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0UHJvbXB0ID0gZnVuY3Rpb24gKHByb21wdE5hbWVfMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAocHJvbXB0TmFtZSwgcHJvbXB0Q2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNDU7XG4gICAgICAgICAgICBpZiAocHJvbXB0Q2F0ZWdvcnkgPT09IHZvaWQgMCkgeyBwcm9tcHRDYXRlZ29yeSA9ICdEZWZhdWx0JzsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvcHJvbXB0L1wiKS5jb25jYXQocHJvbXB0Q2F0ZWdvcnksIFwiL1wiKS5jb25jYXQocHJvbXB0TmFtZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5wcm9tcHRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl80NSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzQ1KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5nZXRQcm9tcHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAocHJvbXB0Q2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNDY7XG4gICAgICAgICAgICBpZiAocHJvbXB0Q2F0ZWdvcnkgPT09IHZvaWQgMCkgeyBwcm9tcHRDYXRlZ29yeSA9ICdEZWZhdWx0JzsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvcHJvbXB0L1wiKS5jb25jYXQocHJvbXB0Q2F0ZWdvcnkpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEucHJvbXB0c107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQ2ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNDYpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmFkZFByb21wdENhdGVnb3J5ID0gZnVuY3Rpb24gKHByb21wdENhdGVnb3J5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNDc7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9wcm9tcHQvXCIpLmNvbmNhdChwcm9tcHRDYXRlZ29yeSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgXCJQcm9tcHQgY2F0ZWdvcnkgXCIuY29uY2F0KHByb21wdENhdGVnb3J5LCBcIiBjcmVhdGVkLlwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQ3ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNDcpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldFByb21wdENhdGVnb3JpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNDg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9wcm9tcHQvY2F0ZWdvcmllc1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnByb21wdF9jYXRlZ29yaWVzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNDggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl80OCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0UHJvbXB0QXJncyA9IGZ1bmN0aW9uIChwcm9tcHROYW1lXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKHByb21wdE5hbWUsIHByb21wdENhdGVnb3J5KSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzQ5O1xuICAgICAgICAgICAgaWYgKHByb21wdENhdGVnb3J5ID09PSB2b2lkIDApIHsgcHJvbXB0Q2F0ZWdvcnkgPSAnRGVmYXVsdCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL3Byb21wdC9cIikuY29uY2F0KHByb21wdENhdGVnb3J5LCBcIi9cIikuY29uY2F0KHByb21wdE5hbWUsIFwiL2FyZ3NcIiksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5wcm9tcHRfYXJnc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQ5ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNDkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZVByb21wdCA9IGZ1bmN0aW9uIChwcm9tcHROYW1lXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKHByb21wdE5hbWUsIHByb21wdENhdGVnb3J5KSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzUwO1xuICAgICAgICAgICAgaWYgKHByb21wdENhdGVnb3J5ID09PSB2b2lkIDApIHsgcHJvbXB0Q2F0ZWdvcnkgPSAnRGVmYXVsdCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZGVsZXRlKFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL3Byb21wdC9cIikuY29uY2F0KHByb21wdENhdGVnb3J5LCBcIi9cIikuY29uY2F0KHByb21wdE5hbWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzUwID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTApXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnVwZGF0ZVByb21wdCA9IGZ1bmN0aW9uIChwcm9tcHROYW1lXzEsIHByb21wdF8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChwcm9tcHROYW1lLCBwcm9tcHQsIHByb21wdENhdGVnb3J5KSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzUxO1xuICAgICAgICAgICAgaWYgKHByb21wdENhdGVnb3J5ID09PSB2b2lkIDApIHsgcHJvbXB0Q2F0ZWdvcnkgPSAnRGVmYXVsdCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucHV0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL3Byb21wdC9cIikuY29uY2F0KHByb21wdENhdGVnb3J5LCBcIi9cIikuY29uY2F0KHByb21wdE5hbWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogcHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRfbmFtZTogcHJvbXB0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0X2NhdGVnb3J5OiBwcm9tcHRDYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzUxID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTEpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnJlbmFtZVByb21wdCA9IGZ1bmN0aW9uIChwcm9tcHROYW1lXzEsIG5ld05hbWVfMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAocHJvbXB0TmFtZSwgbmV3TmFtZSwgcHJvbXB0Q2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNTI7XG4gICAgICAgICAgICBpZiAocHJvbXB0Q2F0ZWdvcnkgPT09IHZvaWQgMCkgeyBwcm9tcHRDYXRlZ29yeSA9ICdEZWZhdWx0JzsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wYXRjaChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9wcm9tcHQvXCIpLmNvbmNhdChwcm9tcHRDYXRlZ29yeSwgXCIvXCIpLmNvbmNhdChwcm9tcHROYW1lKSwgeyBwcm9tcHRfbmFtZTogbmV3TmFtZSB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzUyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEV4dGVuc2lvblNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzUzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvZXh0ZW5zaW9ucy9zZXR0aW5nc1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLmV4dGVuc2lvbl9zZXR0aW5nc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzUzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEV4dGVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNTQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9leHRlbnNpb25zXCIpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuZXh0ZW5zaW9uc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzU0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEFnZW50RXh0ZW5zaW9ucyA9IGZ1bmN0aW9uIChhZ2VudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl81NTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9leHRlbnNpb25zXCIpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuZXh0ZW5zaW9uc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzU1ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldENvbW1hbmRBcmdzID0gZnVuY3Rpb24gKGNvbW1hbmROYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNTY7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9leHRlbnNpb25zL1wiKS5jb25jYXQoY29tbWFuZE5hbWUsIFwiL2FyZ3NcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5jb21tYW5kX2FyZ3NdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl81NiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzU2KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5sZWFyblRleHQgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIHVzZXJJbnB1dF8xLCB0ZXh0XzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgdXNlcklucHV0LCB0ZXh0LCBjb2xsZWN0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzU3O1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25OdW1iZXIgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uTnVtYmVyID0gXCIwXCI7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvbGVhcm4vdGV4dFwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lucHV0OiB1c2VySW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25fbnVtYmVyOiBjb2xsZWN0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNTcgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl81NyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUubGVhcm5VcmwgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIHVybF8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIHVybCwgY29sbGVjdGlvbk51bWJlcikge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl81ODtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uTnVtYmVyID09PSB2b2lkIDApIHsgY29sbGVjdGlvbk51bWJlciA9IFwiMFwiOyB9XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBvc3QoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL2xlYXJuL3VybFwiKSwgeyB1cmw6IHVybCwgY29sbGVjdGlvbl9udW1iZXI6IGNvbGxlY3Rpb25OdW1iZXIgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl81OCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzU4KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5sZWFybkZpbGUgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIGZpbGVOYW1lXzEsIGZpbGVDb250ZW50XzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgZmlsZU5hbWUsIGZpbGVDb250ZW50LCBjb2xsZWN0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzU5O1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25OdW1iZXIgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uTnVtYmVyID0gXCIwXCI7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvbGVhcm4vZmlsZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlX25hbWU6IGZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2NvbnRlbnQ6IGZpbGVDb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uX251bWJlcjogY29sbGVjdGlvbk51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzU5ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNTkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmxlYXJuR2l0aHViUmVwbyA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSwgZ2l0aHViUmVwb18xLCBnaXRodWJVc2VyXzEsIGdpdGh1YlRva2VuXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgZ2l0aHViUmVwbywgZ2l0aHViVXNlciwgZ2l0aHViVG9rZW4sIGdpdGh1YkJyYW5jaCwgdXNlQWdlbnRTZXR0aW5ncywgY29sbGVjdGlvbk51bWJlcikge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl82MDtcbiAgICAgICAgICAgIGlmIChnaXRodWJCcmFuY2ggPT09IHZvaWQgMCkgeyBnaXRodWJCcmFuY2ggPSAnbWFpbic7IH1cbiAgICAgICAgICAgIGlmICh1c2VBZ2VudFNldHRpbmdzID09PSB2b2lkIDApIHsgdXNlQWdlbnRTZXR0aW5ncyA9IGZhbHNlOyB9XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbk51bWJlciA9PT0gdm9pZCAwKSB7IGNvbGxlY3Rpb25OdW1iZXIgPSAnMCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvbGVhcm4vZ2l0aHViXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpdGh1Yl9yZXBvOiBnaXRodWJSZXBvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaXRodWJfdXNlcjogZ2l0aHViVXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2l0aHViX3Rva2VuOiBnaXRodWJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2l0aHViX2JyYW5jaDogZ2l0aHViQnJhbmNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VfYWdlbnRfc2V0dGluZ3M6IHVzZUFnZW50U2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25fbnVtYmVyOiBjb2xsZWN0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNjAgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl82MCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUubGVhcm5BcnhpdiA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAoYWdlbnROYW1lLCBxdWVyeSwgYXJ4aXZJZHMsIG1heFJlc3VsdHMsIGNvbGxlY3Rpb25OdW1iZXIpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNjE7XG4gICAgICAgICAgICBpZiAocXVlcnkgPT09IHZvaWQgMCkgeyBxdWVyeSA9ICcnOyB9XG4gICAgICAgICAgICBpZiAoYXJ4aXZJZHMgPT09IHZvaWQgMCkgeyBhcnhpdklkcyA9ICcnOyB9XG4gICAgICAgICAgICBpZiAobWF4UmVzdWx0cyA9PT0gdm9pZCAwKSB7IG1heFJlc3VsdHMgPSA1OyB9XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbk51bWJlciA9PT0gdm9pZCAwKSB7IGNvbGxlY3Rpb25OdW1iZXIgPSAnMCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvbGVhcm4vYXJ4aXZcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnhpdl9pZHM6IGFyeGl2SWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfcmVzdWx0czogbWF4UmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbl9udW1iZXI6IGNvbGxlY3Rpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl82MSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzYxKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5hZ2VudFJlYWRlciA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSwgcmVhZGVyTmFtZV8xLCBkYXRhXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgcmVhZGVyTmFtZSwgZGF0YSwgY29sbGVjdGlvbk51bWJlcikge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl82MjtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uTnVtYmVyID09PSB2b2lkIDApIHsgY29sbGVjdGlvbk51bWJlciA9ICcwJzsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmNvbGxlY3Rpb25fbnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jb2xsZWN0aW9uX251bWJlciA9IGNvbGxlY3Rpb25OdW1iZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvcmVhZGVyL1wiKS5jb25jYXQocmVhZGVyTmFtZSksIHsgZGF0YTogZGF0YSB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzYyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNjIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEFnZW50TWVtb3JpZXMgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIHVzZXJJbnB1dF8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIHVzZXJJbnB1dCwgbGltaXQsIG1pblJlbGV2YW5jZVNjb3JlLCBjb2xsZWN0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzYzO1xuICAgICAgICAgICAgaWYgKGxpbWl0ID09PSB2b2lkIDApIHsgbGltaXQgPSA1OyB9XG4gICAgICAgICAgICBpZiAobWluUmVsZXZhbmNlU2NvcmUgPT09IHZvaWQgMCkgeyBtaW5SZWxldmFuY2VTY29yZSA9IDAuNTsgfVxuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25OdW1iZXIgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uTnVtYmVyID0gXCIwXCI7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvbWVtb3J5L1wiKS5jb25jYXQoY29sbGVjdGlvbk51bWJlciwgXCIvcXVlcnlcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9pbnB1dDogdXNlcklucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbl9yZWxldmFuY2Vfc2NvcmU6IG1pblJlbGV2YW5jZVNjb3JlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZW1vcmllc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzYzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNjMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZUFnZW50TWVtb3J5ID0gZnVuY3Rpb24gKGFnZW50TmFtZV8xLCBtZW1vcnlJZF8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIG1lbW9yeUlkLCBjb2xsZWN0aW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzY0O1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25OdW1iZXIgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uTnVtYmVyID0gXCIwXCI7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZGVsZXRlKFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9tZW1vcnkvXCIpLmNvbmNhdChjb2xsZWN0aW9uTnVtYmVyLCBcIi9cIikuY29uY2F0KG1lbW9yeUlkKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl82NCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzY0KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5jcmVhdGVEYXRhc2V0ID0gZnVuY3Rpb24gKGFnZW50TmFtZV8xLCBkYXRhc2V0TmFtZV8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIGRhdGFzZXROYW1lLCBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNjU7XG4gICAgICAgICAgICBpZiAoYmF0Y2hTaXplID09PSB2b2lkIDApIHsgYmF0Y2hTaXplID0gNDsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9tZW1vcnkvZGF0YXNldFwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0X25hbWU6IGRhdGFzZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaFNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl82NSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzY1KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5leGVjdXRlQ29tbWFuZFdpdGhWb2ljZSA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSwgYmFzZTY0QXVkaW9fMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAoYWdlbnROYW1lLCBiYXNlNjRBdWRpbywgYXVkaW9Gb3JtYXQsIGF1ZGlvVmFyaWFibGUsIGNvbW1hbmROYW1lLCBjb21tYW5kQXJncywgdHRzLCBjb252ZXJzYXRpb25OYW1lKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzY2O1xuICAgICAgICAgICAgaWYgKGF1ZGlvRm9ybWF0ID09PSB2b2lkIDApIHsgYXVkaW9Gb3JtYXQgPSAnbTRhJzsgfVxuICAgICAgICAgICAgaWYgKGF1ZGlvVmFyaWFibGUgPT09IHZvaWQgMCkgeyBhdWRpb1ZhcmlhYmxlID0gJ2RhdGFfdG9fY29ycmVsYXRlX3dpdGhfaW5wdXQnOyB9XG4gICAgICAgICAgICBpZiAoY29tbWFuZE5hbWUgPT09IHZvaWQgMCkgeyBjb21tYW5kTmFtZSA9ICdTdG9yZSBpbmZvcm1hdGlvbiBpbiBteSBsb25nIHRlcm0gbWVtb3J5JzsgfVxuICAgICAgICAgICAgaWYgKGNvbW1hbmRBcmdzID09PSB2b2lkIDApIHsgY29tbWFuZEFyZ3MgPSB7IGlucHV0OiAnVm9pY2UgdHJhbnNjcmlwdGlvbiBmcm9tIHVzZXInIH07IH1cbiAgICAgICAgICAgIGlmICh0dHMgPT09IHZvaWQgMCkgeyB0dHMgPSBmYWxzZTsgfVxuICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbk5hbWUgPT09IHZvaWQgMCkgeyBjb252ZXJzYXRpb25OYW1lID0gJ0FHaVhUIFRlcm1pbmFsJzsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9jb21tYW5kXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfbmFtZTogJ0NvbW1hbmQgd2l0aCBWb2ljZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfYXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0X2F1ZGlvOiBiYXNlNjRBdWRpbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvX3ZhcmlhYmxlOiBhdWRpb1ZhcmlhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9fZm9ybWF0OiBhdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0czogdHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZF9uYW1lOiBjb21tYW5kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfYXJnczogY29tbWFuZEFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9uYW1lOiBjb252ZXJzYXRpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5yZXNwb25zZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzY2ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNjYpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldEVtYmVkZGVyc0RldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNjc7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmdldChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9lbWJlZGRlcnNcIiksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5lbWJlZGRlcnNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl82NyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzY3KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5wb3NpdGl2ZUZlZWRiYWNrID0gZnVuY3Rpb24gKGFnZW50TmFtZV8xLCBtZXNzYWdlXzEsIHVzZXJJbnB1dF8xLCBmZWVkYmFja18xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIG1lc3NhZ2UsIHVzZXJJbnB1dCwgZmVlZGJhY2ssIGNvbnZlcnNhdGlvbk5hbWUpIHtcbiAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb25OYW1lID09PSB2b2lkIDApIHsgY29udmVyc2F0aW9uTmFtZSA9ICcnOyB9XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucHJvdmlkZUZlZWRiYWNrKGFnZW50TmFtZSwgbWVzc2FnZSwgdXNlcklucHV0LCBmZWVkYmFjaywgdHJ1ZSwgY29udmVyc2F0aW9uTmFtZSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLm5lZ2F0aXZlRmVlZGJhY2sgPSBmdW5jdGlvbiAoYWdlbnROYW1lXzEsIG1lc3NhZ2VfMSwgdXNlcklucHV0XzEsIGZlZWRiYWNrXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgbWVzc2FnZSwgdXNlcklucHV0LCBmZWVkYmFjaywgY29udmVyc2F0aW9uTmFtZSkge1xuICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbk5hbWUgPT09IHZvaWQgMCkgeyBjb252ZXJzYXRpb25OYW1lID0gJyc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wcm92aWRlRmVlZGJhY2soYWdlbnROYW1lLCBtZXNzYWdlLCB1c2VySW5wdXQsIGZlZWRiYWNrLCBmYWxzZSwgY29udmVyc2F0aW9uTmFtZSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLnByb3ZpZGVGZWVkYmFjayA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIG1lc3NhZ2UsIHVzZXJJbnB1dCwgZmVlZGJhY2ssIHBvc2l0aXZlLCBjb252ZXJzYXRpb25OYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNjg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBvc3QoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL2ZlZWRiYWNrXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaW5wdXQ6IHVzZXJJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVlZGJhY2s6IGZlZWRiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGl2ZTogcG9zaXRpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9uYW1lOiBjb252ZXJzYXRpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNjggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl82OCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUuZ2V0QnJvd3NlZExpbmtzID0gZnVuY3Rpb24gKGFnZW50TmFtZV8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChhZ2VudE5hbWUsIGNvbGxlY3Rpb25OdW1iZXIpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNjk7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbk51bWJlciA9PT0gdm9pZCAwKSB7IGNvbGxlY3Rpb25OdW1iZXIgPSAnMCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9icm93c2VkX2xpbmtzL1wiKS5jb25jYXQoY29sbGVjdGlvbk51bWJlciksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5saW5rc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzY5ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNjkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZUJyb3dzZWRMaW5rID0gZnVuY3Rpb24gKGFnZW50TmFtZV8xLCBsaW5rXzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgbGluaywgY29sbGVjdGlvbk51bWJlcikge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl83MDtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uTnVtYmVyID09PSB2b2lkIDApIHsgY29sbGVjdGlvbk51bWJlciA9ICcwJzsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5kZWxldGUoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL2Jyb3dzZWRfbGlua3NcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGxpbms6IGxpbmssIGNvbGxlY3Rpb25fbnVtYmVyOiBjb2xsZWN0aW9uTnVtYmVyIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl83MCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzcwKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5nZXRNZW1vcmllc0V4dGVybmFsU291cmNlcyA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIGNvbGxlY3Rpb25OdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl83MTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQuZ2V0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9tZW1vcnkvZXh0ZXJuYWxfc291cmNlcy9cIikuY29uY2F0KGNvbGxlY3Rpb25OdW1iZXIpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEuZXh0ZXJuYWxfc291cmNlc107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzcxID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNzEpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmRlbGV0ZU1lbW9yeUV4dGVybmFsU291cmNlID0gZnVuY3Rpb24gKGFnZW50TmFtZSwgc291cmNlLCBjb2xsZWN0aW9uTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfNzI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LmRlbGV0ZShcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvbWVtb3J5L2V4dGVybmFsX3NvdXJjZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVybmFsX3NvdXJjZTogc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbl9udW1iZXI6IGNvbGxlY3Rpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl83MiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzcyKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5nZXRQZXJzb25hID0gZnVuY3Rpb24gKGFnZW50TmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzczO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL3BlcnNvbmFcIiksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS5wZXJzb25hXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl83MyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUudXBkYXRlUGVyc29uYSA9IGZ1bmN0aW9uIChhZ2VudE5hbWUsIHBlcnNvbmEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl83NDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucHV0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi9wZXJzb25hXCIpLCB7IHBlcnNvbmE6IHBlcnNvbmEgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLm1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl83NCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzc0KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5wcm9tcHRBZ2VudFdpdGhWb2ljZSA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSwgYmFzZTY0QXVkaW9fMSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiAoYWdlbnROYW1lLCBiYXNlNjRBdWRpbywgYXVkaW9Gb3JtYXQsIGF1ZGlvVmFyaWFibGUsIHByb21wdE5hbWUsIHByb21wdEFyZ3MsIHR0cywgY29udmVyc2F0aW9uTmFtZSkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl83NTtcbiAgICAgICAgICAgIGlmIChhdWRpb0Zvcm1hdCA9PT0gdm9pZCAwKSB7IGF1ZGlvRm9ybWF0ID0gJ200YSc7IH1cbiAgICAgICAgICAgIGlmIChhdWRpb1ZhcmlhYmxlID09PSB2b2lkIDApIHsgYXVkaW9WYXJpYWJsZSA9ICd1c2VyX2lucHV0JzsgfVxuICAgICAgICAgICAgaWYgKHByb21wdE5hbWUgPT09IHZvaWQgMCkgeyBwcm9tcHROYW1lID0gJ0N1c3RvbSBJbnB1dCc7IH1cbiAgICAgICAgICAgIGlmIChwcm9tcHRBcmdzID09PSB2b2lkIDApIHsgcHJvbXB0QXJncyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0X3Jlc3VsdHM6IDYsXG4gICAgICAgICAgICAgICAgaW5qZWN0X21lbW9yaWVzX2Zyb21fY29sbGVjdGlvbl9udW1iZXI6IDAsXG4gICAgICAgICAgICB9OyB9XG4gICAgICAgICAgICBpZiAodHRzID09PSB2b2lkIDApIHsgdHRzID0gZmFsc2U7IH1cbiAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb25OYW1lID09PSB2b2lkIDApIHsgY29udmVyc2F0aW9uTmFtZSA9ICdBR2lYVCBUZXJtaW5hbCc7IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9hZ2VudC9cIikuY29uY2F0KGFnZW50TmFtZSwgXCIvY29tbWFuZFwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kX25hbWU6ICdQcm9tcHQgd2l0aCBWb2ljZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfYXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0X2F1ZGlvOiBiYXNlNjRBdWRpbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvX3ZhcmlhYmxlOiBhdWRpb1ZhcmlhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9fZm9ybWF0OiBhdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0czogdHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0X25hbWU6IHByb21wdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRfYXJnczogcHJvbXB0QXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX25hbWU6IGNvbnZlcnNhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNzUgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl83NSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBR2lYVFNESy5wcm90b3R5cGUudGV4dFRvU3BlZWNoID0gZnVuY3Rpb24gKGFnZW50TmFtZSwgdGV4dCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzc2O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5wb3N0KFwiXCIuY29uY2F0KHRoaXMuYmFzZVVyaSwgXCIvYXBpL2FnZW50L1wiKS5jb25jYXQoYWdlbnROYW1lLCBcIi90ZXh0X3RvX3NwZWVjaFwiKSwgeyB0ZXh0OiB0ZXh0IH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2UuZGF0YS51cmxdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl83NiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzc2KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5uZXdDb252ZXJzYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gKHJvbGUsIG1lc3NhZ2UsIGNvbnZlcnNhdGlvbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl83NztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBheGlvc18xLmRlZmF1bHQucG9zdChcIlwiLmNvbmNhdCh0aGlzLmJhc2VVcmksIFwiL2FwaS9jb252ZXJzYXRpb24vbWVzc2FnZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiByb2xlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25fbmFtZTogY29udmVyc2F0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmRhdGEubWVzc2FnZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzc3ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3JfNzcpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQUdpWFRTREsucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbnNXaXRoSWRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVycm9yXzc4O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvY29udmVyc2F0aW9uc1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLmNvbnZlcnNhdGlvbnNfd2l0aF9pZHNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl83OCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUVycm9yKGVycm9yXzc4KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFHaVhUU0RLLnByb3RvdHlwZS5wbGFuVGFzayA9IGZ1bmN0aW9uIChhZ2VudE5hbWVfMSwgdXNlcklucHV0XzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGFnZW50TmFtZSwgdXNlcklucHV0LCB3ZWJzZWFyY2gsIHdlYnNlYXJjaERlcHRoLCBjb252ZXJzYXRpb25OYW1lLCBsb2dVc2VySW5wdXQsIGxvZ091dHB1dCwgZW5hYmxlTmV3Q29tbWFuZCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBlcnJvcl83OTtcbiAgICAgICAgICAgIGlmICh3ZWJzZWFyY2ggPT09IHZvaWQgMCkgeyB3ZWJzZWFyY2ggPSBmYWxzZTsgfVxuICAgICAgICAgICAgaWYgKHdlYnNlYXJjaERlcHRoID09PSB2b2lkIDApIHsgd2Vic2VhcmNoRGVwdGggPSAzOyB9XG4gICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uTmFtZSA9PT0gdm9pZCAwKSB7IGNvbnZlcnNhdGlvbk5hbWUgPSAnJzsgfVxuICAgICAgICAgICAgaWYgKGxvZ1VzZXJJbnB1dCA9PT0gdm9pZCAwKSB7IGxvZ1VzZXJJbnB1dCA9IHRydWU7IH1cbiAgICAgICAgICAgIGlmIChsb2dPdXRwdXQgPT09IHZvaWQgMCkgeyBsb2dPdXRwdXQgPSB0cnVlOyB9XG4gICAgICAgICAgICBpZiAoZW5hYmxlTmV3Q29tbWFuZCA9PT0gdm9pZCAwKSB7IGVuYWJsZU5ld0NvbW1hbmQgPSB0cnVlOyB9XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXhpb3NfMS5kZWZhdWx0LnBvc3QoXCJcIi5jb25jYXQodGhpcy5iYXNlVXJpLCBcIi9hcGkvYWdlbnQvXCIpLmNvbmNhdChhZ2VudE5hbWUsIFwiL3BsYW4vdGFza1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lucHV0OiB1c2VySW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYnNlYXJjaDogd2Vic2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWJzZWFyY2hfZGVwdGg6IHdlYnNlYXJjaERlcHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25fbmFtZTogY29udmVyc2F0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nX3VzZXJfaW5wdXQ6IGxvZ1VzZXJJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nX291dHB1dDogbG9nT3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVfbmV3X2NvbW1hbmQ6IGVuYWJsZU5ld0NvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfNzkgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVFcnJvcihlcnJvcl83OSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQUdpWFRTREs7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gQUdpWFRTREs7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/agixt/dist/index.js\n");

/***/ })

};
;